{
    "type": "window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ContractWindow",
        "designer|userAlias": "contractwindow",
        "height": null,
        "minHeight": null,
        "width": 750,
        "overflowY": "auto",
        "layout": "fit",
        "closeAction": "hide",
        "title": "Contract",
        "maximized": false,
        "modal": true
    },
    "id": "ExtBox1-ext-gen4042",
    "designerId": "6b459518-e2c7-4191-b857-9ca840d4b7e0",
    "cn": [
        {
            "type": "form",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyForm3",
                "designer|displayName": "ContractForm",
                "height": null,
                "itemId": "ContractForm",
                "minHeight": 300,
                "layout": "auto",
                "bodyPadding": 5,
                "title": null
            },
            "designerId": "bf14bc64-028b-414e-9311-f836e797148a",
            "cn": [
                {
                    "type": "toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "top",
                        "designer|userClassName": "MyToolbar7",
                        "designer|displayName": "FormToolBar"
                    },
                    "designerId": "3677c442-1b67-4618-9049-e5bb0afa5f84",
                    "cn": [
                        {
                            "type": "button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "designer|userClassName": "MyButton11",
                                "iconCls": "ui-silk ui-silk-disk",
                                "text": "Save"
                            },
                            "designerId": "ffcb7025-509d-4ca2-98bd-1cdd38a70cd7"
                        },
                        {
                            "type": "button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "designer|userClassName": "MyButton12",
                                "text": "Cancel"
                            },
                            "designerId": "cde2f531-f5ab-4278-b92b-9686fe8ddc65",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "onButtonClick1",
                                        "fn": "onButtonClick1",
                                        "implHandler": [
                                            "console.log(button);"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "designerId": "7d96afb0-b4b8-41c7-b10c-cbff42d33bca"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "fieldcontainer",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyFieldContainer7",
                        "designer|displayName": "FormContainer",
                        "height": null,
                        "padding": "0px 0px 10px 0px",
                        "layout": "column",
                        "fieldLabel": null
                    },
                    "designerId": "2598b5fe-a6b3-49b7-a642-bfd1bf386817",
                    "cn": [
                        {
                            "type": "fieldcontainer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|columnWidth": 0.5,
                                "designer|userClassName": "MyFieldContainer5",
                                "designer|displayName": "Column1",
                                "defaults": [
                                    "{padding:'5px 0px 0px 0px'}"
                                ],
                                "layout": "column",
                                "fieldLabel": null,
                                "labelAlign": "right"
                            },
                            "designerId": "18e6f827-66c7-4330-9065-d591cea7ec09",
                            "cn": [
                                {
                                    "type": "textfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyTextField10",
                                        "designer|displayName": "contract_number",
                                        "fieldLabel": "Contract Number",
                                        "labelAlign": "right"
                                    },
                                    "designerId": "aaff276f-e3b6-4f30-a1bd-fffeda2c675d"
                                },
                                {
                                    "type": "combobox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyComboBox3",
                                        "designer|displayName": "client_name",
                                        "name": "client_id",
                                        "fieldLabel": "Client",
                                        "labelAlign": "right",
                                        "displayField": "name",
                                        "store": "ClientStore",
                                        "valueField": "id"
                                    },
                                    "designerId": "dc267fde-ca47-48cf-973a-e85a7caeba37"
                                },
                                {
                                    "type": "combobox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyComboBox4",
                                        "designer|displayName": "payment_type",
                                        "name": "payment_type_id",
                                        "fieldLabel": "Payment Type",
                                        "labelAlign": "right",
                                        "displayField": "name",
                                        "store": "PaymentTypeStore",
                                        "valueField": "id"
                                    },
                                    "designerId": "b2ee4acc-b6d8-4707-8208-de3dc1a9d819"
                                },
                                {
                                    "type": "numberfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyNumberField1",
                                        "designer|displayName": "total_sales_amt",
                                        "fieldLabel": "Total Sales Amount",
                                        "labelAlign": "right",
                                        "minValue": 0
                                    },
                                    "designerId": "8d4547ae-091a-408d-b36e-520014c3fe0d",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|userClassName": "onSalesAmountChange",
                                                "fn": "onSalesAmountChange",
                                                "implHandler": [
                                                    "this.runCalculations();"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "designerId": "35950291-52ea-4dd6-a74f-55880dd4ef6f"
                                        }
                                    ]
                                },
                                {
                                    "type": "numberfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyNumberField7",
                                        "designer|displayName": "discount",
                                        "fieldLabel": "Discount (%)",
                                        "labelAlign": "right",
                                        "maxValue": 1,
                                        "minValue": 0,
                                        "step": 0.05
                                    },
                                    "designerId": "9384a014-54d2-4c3f-b496-650b59f2da9c",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|userClassName": "onDiscountChange",
                                                "fn": "onDiscountChange",
                                                "implHandler": [
                                                    "this.runCalculations();"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "designerId": "3164f420-0151-42cc-afd0-6b5a809f8179"
                                        }
                                    ]
                                },
                                {
                                    "type": "numberfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyNumberField3",
                                        "designer|displayName": "design_fee",
                                        "fieldLabel": "Design Fee",
                                        "labelAlign": "right",
                                        "step": 5
                                    },
                                    "designerId": "03636658-a9c9-4867-af17-dd030226cb0a",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|userClassName": "onDesignFeeChange",
                                                "fn": "onDesignFeeChange",
                                                "implHandler": [
                                                    "this.runCalculations();"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "designerId": "8237877e-d059-4e35-9d0a-928112b384b1"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "fieldcontainer",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|columnWidth": 0.5,
                                "designer|userClassName": "MyFieldContainer6",
                                "designer|displayName": "Column2",
                                "border": 1,
                                "padding": null,
                                "width": null,
                                "defaults": [
                                    "{padding: '5px 0px'}"
                                ],
                                "layout": "column",
                                "combineLabels": false,
                                "fieldLabel": null,
                                "labelAlign": "right"
                            },
                            "designerId": "92c15c97-c232-4858-ac22-010d23aa4f96",
                            "cn": [
                                {
                                    "type": "textfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyTextField8",
                                        "designer|displayName": "subtotal",
                                        "disabled": true,
                                        "fieldLabel": "Subtotal",
                                        "labelAlign": "right"
                                    },
                                    "designerId": "6f01dee6-e746-4cd8-885a-c1d56eba1c45"
                                },
                                {
                                    "type": "textfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyTextField9",
                                        "designer|displayName": "total_amt",
                                        "padding": "",
                                        "fieldLabel": "Total Amount",
                                        "labelAlign": "right"
                                    },
                                    "designerId": "d3f23acb-8232-4066-9543-c87efc0b1dc1"
                                },
                                {
                                    "type": "numberfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyNumberField5",
                                        "designer|displayName": "first_months_payment",
                                        "fieldLabel": "1st Mon. Payment",
                                        "labelAlign": "right",
                                        "labelPad": null,
                                        "labelWidth": null,
                                        "autoStripChars": false
                                    },
                                    "designerId": "6d8f12c7-6df1-4f94-bce7-1e4ed1537dce",
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|userClassName": "onFirstMonthsPaymentChange",
                                                "fn": "onFirstMonthsPaymentChange",
                                                "implHandler": [
                                                    "this.paymentCalculations();"
                                                ],
                                                "name": "change",
                                                "scope": "me"
                                            },
                                            "designerId": "f813a50f-af23-4162-a671-85fd55be2a22"
                                        }
                                    ]
                                },
                                {
                                    "type": "textfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyTextField11",
                                        "designer|displayName": "monthly_payment",
                                        "fieldLabel": "Montly Payment",
                                        "labelAlign": "right"
                                    },
                                    "designerId": "0a8f2429-7e3f-4de6-939e-acdccc14e66e"
                                },
                                {
                                    "type": "hiddenfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyHiddenField",
                                        "name": "client_id",
                                        "fieldLabel": null
                                    },
                                    "designerId": "c1b5b8e0-1f57-4e91-b4d3-007de2b87064"
                                },
                                {
                                    "type": "hiddenfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyHiddenField1",
                                        "name": "contract_id",
                                        "fieldLabel": "Label"
                                    },
                                    "designerId": "f7cd334e-83b0-4f7c-906c-cc95ccaf4814"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "linkedinstance",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|displayName": "ContractAdvertisementGrid",
                        "height": 150,
                        "padding": "10px 0px"
                    },
                    "designerId": "d1f7b7a8-caeb-4910-9a9d-92ee0c214327",
                    "masterInstanceId": "ExtBox1-ext-gen6258"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "runCalculations",
                "fn": "runCalculations",
                "implHandler": [
                    "var total_sales_amt = Ext.getCmp(\"total_sales_amount\").getValue();",
                    "var discount = Ext.getCmp(\"discount\").getValue();",
                    "var subtotal = Ext.getCmp(\"subtotal\").getValue();",
                    "var design_fee = Ext.getCmp(\"design_fee\").getValue();",
                    "",
                    "var sub_total_calc = (total_sales_amt*(1-discount)).toFixed(2);",
                    "Ext.getCmp(\"subtotal\").setValue(sub_total_calc);",
                    "",
                    "var total_calc = parseFloat(sub_total_calc) + design_fee;",
                    "Ext.getCmp(\"total_amount\").setValue(total_calc.toFixed(2));",
                    "",
                    "this.paymentCalcuations();"
                ]
            },
            "designerId": "0f503491-6460-4c7e-ab77-ae22f02c61b8"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "paymentCalculations",
                "fn": "paymentCalculations",
                "implHandler": [
                    "var subtotal = Ext.getCmp(\"subtotal\").getValue();",
                    "var design_fee = Ext.getCmp(\"design_fee\").getValue();",
                    "var durations = Ext.getCmp(\"ad_duration\").getValue();",
                    "",
                    "var dur_array = durations.split(\",\");",
                    "var duration = dur_array.length;",
                    "if(duration===0){",
                    "    duration=1;",
                    "}",
                    "var first_month_calc = (subtotal/duration)+design_fee;",
                    "var month_payment = (subtotal/duration);",
                    "Ext.getCmp(\"first_month_payment\").setValue(first_month_calc.toFixed(2));",
                    "Ext.getCmp(\"monthly_payment\").setValue(month_payment.toFixed(2));"
                ]
            },
            "designerId": "3edcd541-8ca2-4aaf-888e-bdd362c2813c"
        }
    ]
}